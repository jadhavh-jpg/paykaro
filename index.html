<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PAY KARO - Zero Fees. Full Control.</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;}
body{background:#f4f9ff;color:#01223A;}
header{background:#01223A;color:white;padding:14px 28px;display:flex;justify-content:space-between;align-items:center;}
.logo{font-size:28px;font-weight:800;color:#00D4D4;}
nav a{color:white;margin:0 10px;text-decoration:none;font-size:15px;}

.section{padding:80px 20px;text-align:center;}
.section h2{font-size:32px;margin-bottom:10px;}
.section-sub{font-size:15px;opacity:0.75;margin-bottom:30px;}

.card{background:white;width:100%;max-width:360px;margin:0 auto;padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.15);}

input{margin:6px 0;padding:9px;width:100%;border-radius:8px;border:1px solid #ccc;}

.btn{margin-top:15px;padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:16px;width:100%;}
.btn-primary{background:#00D4D4;color:#01223A;}
.btn-secondary{background:#01223A;color:white;}

.preview-card{max-width:420px;margin:20px auto;background:#121212;color:#fff;padding:16px;border-radius:12px;}

.pay-btn{margin-top:18px;width:100%;padding:14px;border:none;border-radius:999px;font-size:18px;font-weight:700;background:#00c853;color:#fff;cursor:pointer;}
</style>
</head>

<body>

<header>
  <div class="logo">PAY KARO</div>
</header>


<!-- LOGIN -->
<section id="login" class="section">
  <h2>Merchant Login</h2>
  <p class="section-sub">Mobile + Merchant ID se login</p>
  <form onsubmit="handleLogin(); return false;">
    <input type="text" id="loginMobile" placeholder="WhatsApp Number" required>
    <input type="text" id="loginMerchantId" placeholder="Merchant ID (PK-1234)" required>
    <button type="submit" class="btn btn-primary">Login</button>
  </form>
  <p>New ho? <a href="#" onclick="showSignup()">Signup karein</a></p>
</section>


<!-- SIGNUP -->
<section id="signup" class="section" style="display:none;">
  <h2>Merchant Signup</h2>
  <form onsubmit="handleSignup(); return false;">
    <input type="text" id="name" placeholder="Naam" required>
    <input type="text" id="mobile" placeholder="WhatsApp" required>
    <input type="text" id="city" placeholder="City" required>
    <input type="text" id="business" placeholder="Business (optional)">
    <input type="text" id="upi" placeholder="UPI ID (example@oksbi)" required>
    <button type="submit" class="btn btn-primary">Create Account</button>
  </form>
  <p><a href="#" onclick="showLogin()">Already account? Login</a></p>
</section>


<!-- DASHBOARD -->
<section id="dashboard" class="section" style="display:none;">
  <h2>PAY KARO Dashboard</h2>
  <p class="section-sub">Manage your payments</p>
  
  <div class="card" style="text-align:left;">
    <h3 id="dashName"></h3>
    <p><strong>ID:</strong> <span id="dashId"></span></p>
    <p><strong>Business:</strong> <span id="dashBiz"></span></p>
    <p><strong>City:</strong> <span id="dashCity"></span></p>
    <p><strong>UPI:</strong> <span id="dashUpi"></span></p>
  </div>

  <button class="btn btn-secondary" onclick="logout()" style="margin-top:18px;">Logout</button>

  <br><br><hr style="opacity:0.3"><br>

  <!-- CREATE POSTER SECTION -->
  <h2>Create Pay Poster Page</h2>
  <p class="section-sub">Poster upload + UPI → ₹ Pay with UPI page</p>

  <div class="card">
    <input type="file" id="posterImage" accept="image/*">
    <input type="text" id="posterUpi" placeholder="UPI ID" required>
    <input type="number" id="posterAmount" placeholder="Amount (₹)">
    <input type="text" id="posterNote" placeholder="Purpose (Fee/Recharge)">
    <button class="btn btn-primary" onclick="generatePosterPage()">Generate & Preview</button>
  </div>

  <div id="posterPreview"></div>
  <a id="posterDownload" href="#" download="pay-poster.html" style="display:none;">
    <button class="btn-secondary" style="margin-top:10px;">Download Payment Page</button>
  </a>
</section>


<script>
const STORAGE_KEY="merchant_pk";
function showLogin(){login.style.display="block";signup.style.display="none";dashboard.style.display="none";}
function showSignup(){login.style.display="none";signup.style.display="block";dashboard.style.display="none";}
function showDash(m){
  login.style.display="none";signup.style.display="none";dashboard.style.display="block";
  dashName.innerText="Hi, "+m.name; dashId.innerText=m.merchantId;
  dashBiz.innerText=m.business; dashCity.innerText=m.city; dashUpi.innerText=m.upi;
}
function handleSignup(){
  const m={name:name.value,mobile:mobile.value,city:city.value,business:business.value||"Not set",upi:upi.value,merchantId:"PK-"+Math.floor(1000+Math.random()*9000)};
  localStorage.setItem(STORAGE_KEY,JSON.stringify(m)); showDash(m);
  window.open(`https://wa.me/9300594567?text=NEW SIGNUP %0AName:${m.name}%0AUPI:${m.upi}%0AID:${m.merchantId}`,'_blank');
}
function handleLogin(){
  let m=JSON.parse(localStorage.getItem(STORAGE_KEY));
  if(!m||m.mobile!==loginMobile.value||m.merchantId!==loginMerchantId.value) return alert("Wrong Login");
  showDash(m);
}
function logout(){showLogin();}

let posterDataUrl="";
posterImage.addEventListener("change",e=>{
  const r=new FileReader();r.onload=i=>posterDataUrl=i.target.result;r.readAsDataURL(e.target.files[0]);
});
function generatePosterPage(){
  if(!posterDataUrl)return alert("Upload image");
  const UPI=posterUpi.value, A=posterAmount.value, N=posterNote.value||"Pay Now";
  const link=`upi://pay?pa=${encodeURIComponent(UPI)}&am=${encodeURIComponent(A)}&cu=INR&tn=${encodeURIComponent(N)}`;
  posterPreview.innerHTML=`<div class='preview-card'><img src="${posterDataUrl}" style="width:100%"><button class="pay-btn" onclick="location.href='${link}'">₹ Pay with UPI</button></div>`;
  const page=`<!DOCTYPE html><html><body><img src='${posterDataUrl}' style='width:100%'><button onclick="location.href='${link}'" style="width:100%;padding:14px;border-radius:999px;font-size:18px;background:#00c853;color:#fff;">₹ Pay with UPI</button></body></html>`;
  const blob=new Blob([page],{type:"text/html"});posterDownload.href=URL.createObjectURL(blob);
  posterDownload.style.display="block";
}
window.onload=()=>{const m=JSON.parse(localStorage.getItem(STORAGE_KEY));if(m)showDash(m);};
</script>

</body>
</html>
