<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayKaro â€“ Secure Payment</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,Segoe UI,Arial}
body{
  min-height:100vh;
  background:linear-gradient(160deg,#071b34,#0e5cad,#eaf4ff);
  display:flex;align-items:center;justify-content:center;
}
.card{
  background:#fff;
  width:92%;max-width:420px;
  padding:26px;
  border-radius:24px;
  box-shadow:0 30px 60px rgba(0,0,0,.18);
  text-align:center;
}
.logo{
  font-size:20px;
  font-weight:800;
  color:#0e5cad;
  margin-bottom:8px;
}
h2{font-size:22px;color:#0f2a44;margin-bottom:10px}
input{
  width:100%;padding:12px;margin-top:8px;
  border-radius:14px;border:1px solid #ccd6e3;
}
button{
  width:100%;padding:15px;margin-top:14px;
  border:none;border-radius:999px;
  font-weight:700;font-size:15px;cursor:pointer;
}
.primary{
  background:linear-gradient(90deg,#0e5cad,#1f86ff);
  color:#fff;
}
.secondary{
  background:#f1f5fb;
  color:#0e5cad;
}
.note{font-size:12px;color:#666;margin-top:10px}
.link-box{
  background:#f4f8fd;
  padding:12px;
  border-radius:12px;
  word-break:break-all;
  font-size:13px;
  margin-top:10px;
}
.qrBox img{width:200px;margin-top:12px}
.hide{display:none}
</style>
</head>

<body>

<!-- ================= CREATE PAYMENT PAGE ================= -->
<div class="card" id="create">
  <div class="logo">PayKaro</div>
  <h2>Create Payment Link</h2>

  <input id="topic" placeholder="Product / Service Name">
  <input id="datetime" type="datetime-local">
  <input id="amount" type="number" placeholder="Amount (â‚¹)">
  <input id="upi" placeholder="UPI ID (name@bank)">
  <input id="wa" placeholder="WhatsApp Number (91XXXXXXXXXX)">

  <button class="primary" onclick="generateLink()">Generate Payment Link</button>

  <div id="out" class="hide">
    <p class="note">Share this payment link</p>
    <div class="link-box" id="finalLink"></div>
    <button class="secondary" onclick="copyLink()">Copy Link</button>
  </div>
</div>

<!-- ================= BUYER LANDING PAGE ================= -->
<div class="card hide" id="landing">
  <div class="logo">PayKaro</div>

  <h2 id="lTopic"></h2>
  <p><b>Date:</b> <span id="lDate"></span></p>
  <p style="font-size:22px;font-weight:800;color:#0e5cad">
    â‚¹<span id="lAmount"></span>
  </p>

  <button class="primary" onclick="payNow()">Pay Now</button>

  <!-- QR FOR DESKTOP -->
  <div class="qrBox hide" id="qrBox">
    <p class="note"><b>Scan & Pay via UPI</b></p>
    <img id="qrImg">
    <p class="note" id="upiText"></p>
  </div>

  <!-- CONTINUE -->
  <button id="continueBtn" class="secondary hide" onclick="goToGroup()">
    Continue to WhatsApp Group
  </button>

  <p class="note">
    After completing payment in your UPI app,  
    tap Continue to join the WhatsApp group.
  </p>
</div>

<script>
/* ===== CONFIG ===== */
const GROUP_LINK = "https://chat.whatsapp.com/XXXXXXXXXX"; // ðŸ‘ˆ apna WhatsApp group link

/* ===== CREATE LINK ===== */
function generateLink(){
  const t = encodeURIComponent(topic.value);
  const d = encodeURIComponent(datetime.value);
  const a = amount.value;
  const u = upi.value.trim();
  const w = wa.value.trim();

  const url =
    `${location.origin}${location.pathname}` +
    `?t=${t}&d=${d}&a=${a}&u=${u}&w=${w}`;

  finalLink.innerText = url;
  out.classList.remove("hide");
}

function copyLink(){
  navigator.clipboard.writeText(finalLink.innerText);
  alert("Payment link copied");
}

/* ===== LANDING LOGIC ===== */
const q = new URLSearchParams(location.search);
if(q.get("t")){
  create.classList.add("hide");
  landing.classList.remove("hide");

  lTopic.innerText = decodeURIComponent(q.get("t"));
  lDate.innerText = decodeURIComponent(q.get("d"));
  lAmount.innerText = q.get("a");

  const upiId = q.get("u");
  const amt = q.get("a");

  // Desktop â†’ show QR
  if(!/Android|iPhone|iPad/i.test(navigator.userAgent)){
    qrBox.classList.remove("hide");
    qrImg.src =
      "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" +
      encodeURIComponent(`upi://pay?pa=${upiId}&pn=PayKaro&am=${amt}&cu=INR`);
    upiText.innerText = upiId;
    continueBtn.classList.remove("hide");
  }
}

/* ===== PAY NOW ===== */
function payNow(){
  const upiId = q.get("u");
  const amt = q.get("a");

  const intent =
    `upi://pay?pa=${upiId}&pn=PayKaro&am=${amt}&cu=INR`;

  if(/Android|iPhone|iPad/i.test(navigator.userAgent)){
    window.location.href = intent;

    // 4 sec baad Continue button dikhao
    setTimeout(()=>{
      continueBtn.classList.remove("hide");
    },4000);
  } else {
    qrBox.classList.remove("hide");
    continueBtn.classList.remove("hide");
  }
}

/* ===== WHATSAPP GROUP ===== */
function goToGroup(){
  window.location.href = GROUP_LINK;
}
</script>

</body>
</html>
