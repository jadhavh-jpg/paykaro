<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayKaro – Create Payment Link</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,Arial}
body{
  min-height:100vh;
  background:linear-gradient(160deg,#071b34,#0e5cad,#eaf4ff);
  display:flex;align-items:center;justify-content:center;
}
.card{
  background:#fff;
  width:92%;max-width:420px;
  padding:24px;border-radius:22px;
  box-shadow:0 25px 45px rgba(0,0,0,.15)
}
h2{color:#0e5cad;margin-bottom:14px}
label{font-size:13px;font-weight:600;margin-top:10px;display:block}
input{
  width:100%;padding:12px;margin-top:6px;
  border-radius:12px;border:1px solid #ccd6e3;
}
small{font-size:11px;color:#666}
button{
  width:100%;padding:14px;margin-top:16px;
  border:none;border-radius:999px;
  background:linear-gradient(90deg,#0e5cad,#1f86ff);
  color:#fff;font-weight:700;cursor:pointer;
}
.actions{display:flex;gap:10px;margin-top:10px}
.actions button{flex:1;font-size:13px;padding:10px}
.hide{display:none}
.link-box{
  background:#f4f8fd;padding:12px;border-radius:12px;
  word-break:break-all;font-size:13px;margin-top:10px
}
.pay-btn{background:#1f86ff}
.done-btn{background:#25D366}
</style>
</head>

<body>

<div class="card" id="create">
<h2>Create Payment Page</h2>

<label>Topic / Product Name</label>
<input id="topic" placeholder="3 Days Tarot Webinar">

<label>Date & Time</label>
<input id="datetime" type="datetime-local">

<label>Amount (₹)</label>
<input id="amount" type="number" placeholder="99">

<label>UPI ID (optional)</label>
<input id="upi" placeholder="name@bank">

<label>OR Upload QR Code</label>
<input type="file" id="qr" accept="image/*">
<small>From gallery (optional)</small>

<button onclick="generate()">Generate Payment Link</button>

<div id="out" class="hide">
  <div class="link-box" id="finalLink"></div>
  <div class="actions">
    <button onclick="copyLink()">Copy</button>
    <button onclick="shareLink()">Share</button>
  </div>
</div>
</div>

<!-- LANDING -->
<div class="card hide" id="landing">
  <h2 id="lTopic"></h2>
  <p><b>Date:</b> <span id="lDate"></span></p>
  <p><b>Amount:</b> ₹<span id="lAmount"></span></p>

  <a id="payBtn" target="_blank">
    <button class="pay-btn">Pay Now</button>
  </a>

  <button class="done-btn" onclick="thankYou()">Payment Done</button>
</div>

<!-- THANK YOU -->
<div class="card hide" id="thanks">
  <h2>✅ Thank You</h2>
  <p>Payment received successfully.</p>
</div>

<script>
function generate(){
  const t=encodeURIComponent(topic.value);
  const d=encodeURIComponent(datetime.value);
  const a=amount.value;
  const u=upi.value.trim();

  const url=`${location.origin}${location.pathname}?t=${t}&d=${d}&a=${a}&u=${u}`;
  finalLink.innerText=url;
  out.classList.remove("hide");
}

function copyLink(){
  navigator.clipboard.writeText(finalLink.innerText);
  alert("Link copied");
}

function shareLink(){
  if(navigator.share){
    navigator.share({url:finalLink.innerText});
  }else alert("Share not supported");
}

const q=new URLSearchParams(location.search);
if(q.get("t")){
  create.classList.add("hide");
  landing.classList.remove("hide");

  lTopic.innerText=decodeURIComponent(q.get("t"));
  lDate.innerText=decodeURIComponent(q.get("d"));
  lAmount.innerText=q.get("a");

  const upi=q.get("u");
  if(upi){
    payBtn.href=`upi://pay?pa=${upi}&pn=PayKaro&am=${q.get("a")}&cu=INR`;
  }
}

function thankYou(){
  landing.classList.add("hide");
  thanks.classList.remove("hide");
}
</script>

</body>
</html>
