<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PayKaro â€“ Pay Securely</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,Arial}
body{
  min-height:100vh;
  background:linear-gradient(160deg,#071b34,#0e5cad,#eaf4ff);
  display:flex;align-items:center;justify-content:center;
}
.card{
  background:#fff;
  width:92%;max-width:420px;
  padding:24px;border-radius:22px;
  box-shadow:0 25px 45px rgba(0,0,0,.15);
  text-align:center;
}
h2{color:#0e5cad;margin-bottom:10px}
p{font-size:14px;margin:6px 0}
button{
  width:100%;padding:14px;margin-top:14px;
  border:none;border-radius:999px;
  font-weight:700;cursor:pointer;
}
.primary{
  background:linear-gradient(90deg,#0e5cad,#1f86ff);
  color:#fff;
}
.qr{
  margin-top:16px;
  display:none;
}
.qr img{width:180px}
.copy{
  margin-top:8px;
  font-size:12px;
  color:#0e5cad;
  cursor:pointer;
}
.note{
  margin-top:10px;
  font-size:12px;
  color:#666;
}
.hide{display:none}
</style>
</head>

<body>

<div class="card" id="page">
  <h2 id="title"></h2>
  <p><b>Date:</b> <span id="date"></span></p>
  <p><b>Amount:</b> â‚¹<span id="amount"></span></p>

  <!-- PAY BUTTON -->
  <button class="primary" onclick="payNow()">Pay Now</button>

  <!-- DESKTOP QR -->
  <div class="qr" id="qrBox">
    <p><b>Scan & Pay via UPI</b></p>
    <img id="qrImg">
    <p id="upiText"></p>
    <div class="copy" onclick="copyUPI()">Copy UPI ID</div>
  </div>

  <p class="note">
    After completing payment in your UPI app,  
    you will be redirected automatically.
  </p>
</div>

<script>
const q = new URLSearchParams(location.search);

const title = decodeURIComponent(q.get("t") || "Payment");
const dateVal = decodeURIComponent(q.get("d") || "");
const amt = q.get("a") || "";
const upi = q.get("u") || "";
const wa = q.get("w") || "";

document.getElementById("title").innerText = title;
document.getElementById("date").innerText = dateVal;
document.getElementById("amount").innerText = amt;

const upiIntent =
  `upi://pay?pa=${upi}&pn=PayKaro&am=${amt}&cu=INR`;

function payNow(){
  // ðŸ“± Mobile â†’ open UPI app
  if(/Android|iPhone|iPad/i.test(navigator.userAgent)){
    window.location.href = upiIntent;

    // WhatsApp redirect after intent (soft & safe)
    setTimeout(()=>{
      if(wa){
        window.location.href =
          `https://wa.me/${wa}?text=Thank%20you%20for%20your%20payment.%20If%20payment%20is%20successful,%20please%20reply%20DONE.`;
      }
    }, 3000);

  } else {
    // ðŸ’» Desktop â†’ show QR
    document.getElementById("qrBox").style.display = "block";
    document.getElementById("qrImg").src =
      "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" +
      encodeURIComponent(upiIntent);
    document.getElementById("upiText").innerText = upi;
  }
}

function copyUPI(){
  navigator.clipboard.writeText(upi);
  alert("UPI ID copied");
}
</script>

</body>
</html>
